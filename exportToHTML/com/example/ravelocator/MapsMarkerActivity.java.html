<html>
<head>
<title>MapsMarkerActivity.java</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #808080;}
.s3 { color: #629755; font-style: italic;}
.s4 { color: #6a8759;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
MapsMarkerActivity.java</font>
</center></td></tr></table>
<pre><span class="s0">package </span><span class="s1">com.example.ravelocator</span><span class="s0">;</span>
<span class="s2">// Copyright 2020 Google LLC</span>
<span class="s2">//</span>
<span class="s2">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="s2">// you may not use this file except in compliance with the License.</span>
<span class="s2">// You may obtain a copy of the License at</span>
<span class="s2">//</span>
<span class="s2">//      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s2">//</span>
<span class="s2">// Unless required by applicable law or agreed to in writing, software</span>
<span class="s2">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="s2">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="s2">// See the License for the specific language governing permissions and</span>
<span class="s2">// limitations under the License.</span>


<span class="s0">import </span><span class="s1">android.content.Intent</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">android.content.SharedPreferences</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">android.os.Bundle</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">android.widget.Toast</span><span class="s0">;</span>

<span class="s0">import </span><span class="s1">androidx.appcompat.app.AppCompatActivity</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">androidx.preference.PreferenceManager</span><span class="s0">;</span>

<span class="s0">import </span><span class="s1">com.google.android.gms.maps.CameraUpdateFactory</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.GoogleMap</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.OnMapReadyCallback</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.SupportMapFragment</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.LatLng</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.LatLngBounds</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.Marker</span><span class="s0">;</span>
<span class="s0">import </span><span class="s1">com.google.android.gms.maps.model.MarkerOptions</span><span class="s0">;</span>

<span class="s3">/**</span>
 <span class="s3">* An activity that displays a Google map with a marker (pin) to indicate a particular location.</span>
 <span class="s3">*/</span>
<span class="s0">public class </span><span class="s1">MapsMarkerActivity </span><span class="s0">extends </span><span class="s1">AppCompatActivity</span>
        <span class="s0">implements </span><span class="s1">OnMapReadyCallback {</span>

    <span class="s0">private </span><span class="s1">String lat</span><span class="s0">;</span>
    <span class="s0">private </span><span class="s1">String lon</span><span class="s0">;</span>
    <span class="s0">private </span><span class="s1">String state</span><span class="s0">;</span>
    <span class="s1">Marker myMarker</span><span class="s0">;</span>
    <span class="s1">@Override</span>
    <span class="s0">protected void </span><span class="s1">onCreate(Bundle savedInstanceState) {</span>
        <span class="s0">super</span><span class="s1">.onCreate(savedInstanceState)</span><span class="s0">;</span>
        <span class="s2">// Retrieve the content view that renders the map.</span>
        <span class="s1">setContentView(R.layout.activity_maps)</span><span class="s0">;</span>
        <span class="s2">// Get the SupportMapFragment and request notification</span>
        <span class="s2">// when the map is ready to be used.</span>
        <span class="s1">SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()</span>
                <span class="s1">.findFragmentById(R.id.map)</span><span class="s0">;</span>
        <span class="s1">mapFragment.getMapAsync(</span><span class="s0">this</span><span class="s1">)</span><span class="s0">;</span>
    <span class="s1">}</span>

    <span class="s3">/**</span>
     <span class="s3">* Manipulates the map when it's available.</span>
     <span class="s3">* The API invokes this callback when the map is ready to be used.</span>
     <span class="s3">* This is where we can add markers or lines, add listeners or move the camera. In this case,</span>
     <span class="s3">* we just add a marker near Sydney, Australia.</span>
     <span class="s3">* If Google Play services is not installed on the device, the user receives a prompt to install</span>
     <span class="s3">* Play services inside the SupportMapFragment. The API invokes this method after the user has</span>
     <span class="s3">* installed Google Play services and returned to the app.</span>
     <span class="s3">*/</span>
    <span class="s1">@Override</span>
    <span class="s0">public void </span><span class="s1">onMapReady(GoogleMap googleMap) {</span>
        <span class="s2">// Add a marker in Sydney, Australia,</span>
        <span class="s2">// and move the map's camera to the same location.</span>
        <span class="s1">SharedPreferences sharedPref = PreferenceManager</span>
                <span class="s1">.getDefaultSharedPreferences(getApplication().getApplicationContext())</span><span class="s0">;</span>
        <span class="s1">lat = sharedPref.getString(</span><span class="s4">&quot;lat&quot;</span><span class="s0">, </span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">lon = sharedPref.getString(</span><span class="s4">&quot;lon&quot;</span><span class="s0">, </span><span class="s4">&quot;&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">state = sharedPref.getString(</span><span class="s4">&quot;state&quot; </span><span class="s0">,</span><span class="s4">&quot;State not found&quot;</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">LatLng location = </span><span class="s0">new </span><span class="s1">LatLng(Double.valueOf(lat)</span><span class="s0">, </span><span class="s1">Double.valueOf(lon))</span><span class="s0">;</span>

       <span class="s2">// googleMap.setLatLngBoundsForCameraTarget(unitedStatesBounds);</span>
        <span class="s1">googleMap.addMarker(</span><span class="s0">new </span><span class="s1">MarkerOptions()</span>
                <span class="s1">.position(location)</span>
                <span class="s1">.title(</span><span class="s4">&quot;Searching for events near &quot; </span><span class="s1">+ location))</span>
                <span class="s1">.setDraggable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
        <span class="s1">googleMap.moveCamera(CameraUpdateFactory.newLatLngZoom(location</span><span class="s0">, </span><span class="s5">7.0f</span><span class="s1">))</span><span class="s0">;</span>
        <span class="s1">googleMap.setOnMapClickListener(</span><span class="s0">new </span><span class="s1">GoogleMap.OnMapClickListener() {</span>
            <span class="s1">@Override</span>
            <span class="s0">public void </span><span class="s1">onMapClick(LatLng latLng) {</span>
                <span class="s1">googleMap.clear()</span><span class="s0">;</span>
                <span class="s1">googleMap.addMarker(</span><span class="s0">new </span><span class="s1">MarkerOptions()</span>
                        <span class="s1">.position(latLng)</span>
                        <span class="s1">.title(</span><span class="s4">&quot;Searching for events near &quot; </span><span class="s1">+ latLng))</span>
                        <span class="s1">.setDraggable(</span><span class="s0">true</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng))</span><span class="s0">;</span>
                <span class="s1">SharedPreferences.Editor editor = sharedPref.edit()</span><span class="s0">;</span>
                <span class="s1">editor.putString(</span><span class="s4">&quot;lat&quot;</span><span class="s0">, </span><span class="s1">String.valueOf(latLng.latitude))</span><span class="s0">;</span>
                <span class="s1">editor.putString(</span><span class="s4">&quot;lon&quot;</span><span class="s0">, </span><span class="s1">String.valueOf(latLng.longitude))</span><span class="s0">;</span>
                <span class="s1">editor.putBoolean(</span><span class="s4">&quot;settings_changed&quot;</span><span class="s0">, true</span><span class="s1">)</span><span class="s0">;</span>
                <span class="s1">editor.apply()</span><span class="s0">;</span>
                <span class="s1">Toast.makeText(MapsMarkerActivity.</span><span class="s0">this, </span><span class="s4">&quot;Location Saved&quot;</span><span class="s0">, </span><span class="s1">Toast.LENGTH_SHORT).show()</span><span class="s0">;</span>

            <span class="s1">}</span>
        <span class="s1">})</span><span class="s0">;</span>
    <span class="s1">}</span>

<span class="s1">}</span>

</pre>
</body>
</html>